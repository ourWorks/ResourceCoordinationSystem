webpackJsonp([16],{KxX3:function(e,t){},"c8x+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("Y0bB"),n=a.n(l),r=a("mIjv"),i=a("tnU5"),o={name:"volunteer_select",data:function(){return{tableData:[{deadline:0,longitude:0,latitude:0,peopleNum:"",dailyResource:"",medicalResource:"",state:""}],today:Object(r.a)(new Date,"{y}-{m}-{d}"),upDateFlag:!0,pageSize:8,currentPage:1}},mounted:function(){var e=this;return new n.a(function(t,a){Object(i.f)().then(function(a){for(var l=0;l<a.data.length;l++)a.data[l].deadline=Object(r.a)(a.data[l].deadline);e.tableData=a.data,t()}).catch(function(e){a(e)})})},updated:function(){console.log("更新一次"),this.upDateFlag&&(console.log("进行表格的更新"),this.updateForm())},methods:{resetDateFilter:function(){this.$refs.filterTable.clearFilter("date")},clearFilter:function(){this.$refs.filterTable.clearFilter()},formatter:function(e,t){return e.address},filterTag:function(e,t){return t.state===e},filterHandler:function(e,t,a){return t[a.property].slice(0,10)===e},updateForm:function(){var e=this;Object(i.f)().then(function(t){for(var a=0;a<t.data.length;a++)t.data[a].deadline=Object(r.a)(t.data[a].deadline);e.tableData=t.data}),this.upDateFlag=!1},acceptTask:function(e,t){var a=this;console.log(e,t),console.log("点击了编辑"),console.log("要编辑的任务cid是"+t.cid),Object(i.b)({cid:t.cid,volunteerId:localStorage.getItem("volunteerId")}).then(function(e){null!=e.data&&(a.$message.success("成功接受任务"),a.$router.push({path:"/home/volunteer/volunteer_task"}))})},handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"help_div"},[a("el-table",{ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize)}},[a("el-table-column",{attrs:{prop:"state",label:"状态",sortable:"",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"待救援"===t.row.state?"danger":"info","disable-transitions":""}},[e._v(e._s(t.row.state)+"\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.acceptTask(t.$index,t.row)}}},[e._v("开始救援\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"deadline",label:"约定时间",sortable:"",width:"160","column-key":"date",filters:[{text:"今天",value:e.today}],"filter-method":e.filterHandler}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"联系电话",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"longitude",label:"经度约数",width:"165"}}),e._v(" "),a("el-table-column",{attrs:{prop:"latitude",label:"纬度约数",width:"165"}}),e._v(" "),a("el-table-column",{staticStyle:{"text-align":"center"},attrs:{prop:"peopleNum",label:"求助人数",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dailyResource",label:"日用资源",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"medicalResource",label:"医疗资源",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"comment",label:"备注",width:"180"}})],1),e._v(" "),a("div",{staticClass:"page_div"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[8,16,23,32,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var s=a("e/h9")(o,c,!1,function(e){a("KxX3")},"data-v-3441be74",null);t.default=s.exports}});
//# sourceMappingURL=16.c49ead87cd740eb6fa6a.js.map