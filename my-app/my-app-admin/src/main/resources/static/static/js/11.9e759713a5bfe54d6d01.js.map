{"version":3,"sources":["webpack:///src/components/home/arrange/arrange_resource.vue","webpack:///./src/components/home/arrange/arrange_resource.vue?cf06","webpack:///./src/components/home/arrange/arrange_resource.vue"],"names":["arrange_resource","data","tableData","search","formInline","time","resource","position","pageSize","currentPage","dialogFormVisible","json_fields","志愿者","志愿者手机号","值班状态","求助市民","市民手机号","安排时间","状态","addFormData","addTitle","mounted","this","updateArrangeForm","methods","_this","Object","arrange","orgId","localStorage","getItem","then","response","handleEdit","index","row","console","log","handleDelete","_this2","cid","citizenName","$message","info","volunteer","state","success","onSubmit","_this3","strategy","chineseStrategy","substr","length","handleSelectionChange","val","multipleSelection","handleSizeChange","handleCurrentChange","dateFormat","column","cellValue","split","handleChangeState","arrange_arrange_resource","render","_vm","_h","$createElement","_c","_self","staticStyle","width","height","text-align","font-family","font-size","margin-bottom","_v","font-weight","color","attrs","gutter","span","offset","staticClass","inline","model","label","placeholder","value","callback","$$v","$set","expression","type","on","click","fields","head","name","fit","size","border","filter","volunteerName","toLowerCase","includes","slice","prop","formatter","sortable","scopedSlots","_u","key","fn","scope","disable-transitions","_s","align","$event","$index","background","current-page","page-sizes","page-size","layout","total","size-change","current-change","title","visible","update:visible","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.9e759713a5bfe54d6d01.js","sourcesContent":["<template>\n  <div style=\"width:100%;height:100%\">\n    <div\n      style=\"width: 100%;height:auto;text-align: center;font-family: 'Microsoft YaHei UI',serif;font-size: larger;margin-bottom: 1%\">\n      设置策略\n    </div>\n    <div\n      style=\"font-family: 'Times New Roman',serif; font-size: x-small;text-align: center;font-weight: lighter;color:red;margin-bottom: 1%\">\n      *每次排班最多给志愿者安排一个\"待救援\"任务，安排之后任务状态变更为“已分配”\n    </div>\n    <div style=\"width: 100%;height: 10%\">\n      <el-row :gutter=\"24\">\n        <el-col :span=\"22\" :offset=\"2\">\n          <el-form :inline=\"true\" :model=\"formInline\" class=\"demo-form-inline\">\n            <el-form-item label=\"考虑时间\">\n              <el-select v-model=\"formInline.time\" placeholder=\"选择条件\" style=\"width: 105px\">\n                <el-option label=\"是\" value=\"time\"></el-option>\n                <el-option label=\"否\" value=\"\"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"考虑资源\">\n              <el-select v-model=\"formInline.resource\" placeholder=\"选择条件\" style=\"width: 105px\">\n                <el-option label=\"是\" value=\"resource\"></el-option>\n                <el-option label=\"否\" value=\"\"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"考虑位置\">\n              <el-select v-model=\"formInline.position\" placeholder=\"选择条件\" style=\"width: 105px\">\n                <el-option label=\"5公里内\" value=\"position\"></el-option>\n                <el-option label=\"否\" value=\"\"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item>\n              <el-button type=\"primary\" @click=\"onSubmit\">一键排班</el-button>\n            </el-form-item>\n            <el-form-item>\n              <download-excel\n                :data=\"tableData\"\n                :fields=\"json_fields\"\n                head=\"排班表\"\n                type=\"xls\"\n                name=\"排班信息\">\n                <el-button type=\"success\"> 导出排班信息</el-button>\n              </download-excel>\n            </el-form-item>\n          </el-form>\n        </el-col>\n      </el-row>\n    </div>\n    <div style=\"width: 100%\">\n      <el-row>\n        <el-col :span=\"22\" :offset=\"1\">\n          <el-table\n            fit\n            size=\"small\"\n            border\n            :data=\"tableData.filter(data => !search || data.volunteerName.toLowerCase().includes(search.toLowerCase()))\n.slice((currentPage-1)*pageSize,currentPage*pageSize)\"\n            style=\"width: 100%\">\n            <el-table-column\n              label=\"志愿者\"\n              prop=\"volunteerName\">\n            </el-table-column>\n            <el-table-column\n              label=\"志愿者手机号\"\n              prop=\"volunteerPhone\">\n            </el-table-column>\n            <el-table-column\n              label=\"值班状态\"\n              prop=\"ondueState\">\n            </el-table-column>\n            <el-table-column\n              label=\"求助市民\"\n              prop=\"citizenName\">\n            </el-table-column>\n            <el-table-column\n              label=\"市民手机号\"\n              prop=\"citizenPhone\">\n            </el-table-column>\n            <el-table-column\n              label=\"安排救援时间\"\n              :formatter=\"dateFormat\"\n              prop=\"time\">\n            </el-table-column>\n            <el-table-column\n              label=\"状态\"\n              prop=\"state\"\n              sortable\n              width=\"100\">\n              <!--        :filters=\"[{ text: '待救援', value: '待救援' }, { text: '已救援', value: '已救援' }]\"-->\n              <!--        :filter-method=\"filterTag\"-->\n              <!--      filter-placement=\"bottom-end\">-->\n              <template slot-scope=\"scope\">\n                <el-tag\n                  :type=\"(scope.row.state === '已分配') ? 'success' :((scope.row.state === '救援中')? 'info':'white')\"\n                  disable-transitions>{{ scope.row.state }}\n                </el-tag>\n              </template>\n            </el-table-column>\n            <el-table-column\n              align=\"center\">\n              <!--              align=\"right\">-->\n              <template slot=\"header\" slot-scope=\"scope\">\n                <el-input\n                  v-model=\"search\"\n                  size=\"small\"\n                  placeholder=\"搜志愿者\"/>\n              </template>\n              <template slot-scope=\"scope\">\n                <!--                <el-button-->\n                <!--                  size=\"mini\"-->\n                <!--                  @click=\"handleEdit(scope.$index, scope.row)\">编辑-->\n                <!--                </el-button>-->\n                <el-button\n                  size=\"mini\"\n                  type=\"danger\"\n                  @click=\"handleDelete(scope.$index, scope.row)\">撤销排班\n                </el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n          <div class=\"page_div\">\n            <el-pagination\n              background\n              @size-change=\"handleSizeChange\"\n              @current-change=\"handleCurrentChange\"\n              :current-page=\"currentPage\"\n              :page-sizes=\"[8, 16, 24, 32, 100]\"\n              :page-size=\"pageSize\"\n              layout=\"total, sizes, prev, pager, next, jumper\"\n              :total=\"tableData.length\"\n            ></el-pagination>\n          </div>\n        </el-col>\n      </el-row>\n    </div>\n    <!--使用title和:title的绑定效果是不一样的-->\n    <el-dialog :title=\"addTitle\" :visible.sync=\"dialogFormVisible\">\n      <el-table\n        fit\n        size=\"small\"\n        border\n        :data=\"addFormData.slice((currentPage-1)*pageSize,currentPage*pageSize)\"\n        style=\"width: 100%\">\n        <el-table-column\n          label=\"志愿者\"\n          prop=\"volunteerName\">\n        </el-table-column>\n        <el-table-column\n          label=\"志愿者手机号\"\n          prop=\"volunteerPhone\">\n        </el-table-column>\n        <el-table-column\n          label=\"值班状态\"\n          prop=\"ondueState\">\n        </el-table-column>\n        <el-table-column\n          label=\"求助市民\"\n          prop=\"citizenName\">\n        </el-table-column>\n        <el-table-column\n          label=\"市民手机号\"\n          prop=\"citizenPhone\">\n        </el-table-column>\n        <el-table-column\n          label=\"安排救援时间\"\n          :formatter=\"dateFormat\"\n          prop=\"time\">\n        </el-table-column>\n        <el-table-column\n          label=\"状态\"\n          prop=\"state\"\n          sortable\n          width=\"100\">\n          <template slot-scope=\"scope\">\n            <el-tag\n              :type=\"(scope.row.state !== '') ?'success':''\"\n              disable-transitions>{{ scope.row.state }}\n            </el-tag>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <!--        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>-->\n        <el-button type=\"primary\" @click=\"handleChangeState\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport {beginArrange, showArrange} from \"../../../api/arrange\";\nimport {changeHelpState} from \"../../../api/volunteer\";\n\nexport default {\n  data() {\n    return {\n      tableData: [],\n      search: '',\n      formInline: {\n        time: '',\n        resource: '',\n        position: ''\n      },\n      pageSize: 8, //每页多少条\n      currentPage: 1, // 当前页\n      dialogFormVisible: false,\n      //为了导出而定义的信息\n      json_fields: {\n        '志愿者': 'volunteerName',\n        '志愿者手机号': 'volunteerPhone',\n        '值班状态': 'ondueState',\n        '求助市民': 'citizenName',\n        '市民手机号': 'citizenPhone',\n        '安排时间': 'time',\n        '状态': 'state'\n      },\n      addFormData: [],\n      addTitle: \"排班结果\"\n    }\n  },\n  mounted() {\n    this.updateArrangeForm()\n  },\n  methods: {\n    updateArrangeForm() {\n      showArrange({orgId: localStorage.getItem(\"l_orgId\")}).then(response => {\n        this.tableData = response.data\n      })\n    },\n    handleEdit(index, row) {\n      console.log(index, row);\n    },\n    handleDelete(index, row) {\n      // console.log(index, row);\n      console.log(row.cid)\n      //和我的任务volunteer_task里面的标记操作一样\n      if (row.citizenName == null) {\n        this.$message.info(\"这个志愿者还没有排班！\")\n      } else {\n        changeHelpState({cid: row.cid, state: \"待救援\"}).then(response => {\n          if (response.data != null) {\n            this.$message.success(\"成功撤销排班！\")\n            //更新一下汇总表格的信息\n            this.updateArrangeForm()\n          }\n        })\n      }\n    },\n    onSubmit() {\n      console.log('submit!');\n      let strategy = \"\"\n      let chineseStrategy = \"\"\n      if (this.formInline.time != \"\") {\n        strategy = strategy + this.formInline.time;\n        chineseStrategy = chineseStrategy + \"时间\";\n      }\n      if (this.formInline.resource != \"\") {\n        strategy = strategy + \",\" + this.formInline.resource\n        chineseStrategy = chineseStrategy + \"+\" + \"资源\"\n      }\n      if (this.formInline.position != \"\") {\n        strategy = strategy + \",\" + this.formInline.position\n        chineseStrategy = chineseStrategy + \"+\" + \"5公里内\"\n      }\n      if (strategy.substr(0, 1) == \",\") {\n        strategy = strategy.substr(1, strategy.length)\n        chineseStrategy = chineseStrategy.substr(1, strategy.length)\n      }\n      console.log(strategy)\n      beginArrange({strategy: strategy, orgId: localStorage.getItem(\"l_orgId\")}).then(response => {\n        if (response.data != null) {\n          this.addTitle = \"排班策略【\" + chineseStrategy + \"】下，新增排班信息：\" + response.data.length + \"条\"\n          this.addFormData = response.data\n          this.dialogFormVisible = true;\n          //更新一下汇总表格的信息\n          this.updateArrangeForm()\n        } else {\n          this.$message.info(\"当前条件下已无法进行更多排班~\")\n        }\n      })\n    },\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    // 每页多少条\n    handleSizeChange(val) {\n      this.pageSize = val;\n    },\n    // 当前页\n    handleCurrentChange(val) {\n      this.currentPage = val;\n    },\n    //时间的格式化\n    dateFormat(row, column, cellValue, index) {\n      // alert(cellValue)\n      if (cellValue != null) {\n        return cellValue.split(\"-\")[1] + \"-\" + cellValue.split(\"-\")[1] + \" \" + cellValue.split(\"T\")[1]\n      } else {\n        return null;\n      }\n    },\n    handleChangeState() {\n      this.dialogFormVisible = false\n    }\n  },\n}\n</script>\n\n<style scoped>\n.page_div {\n  width: 100%;\n  position: center;\n  padding: 10px 0 0 0;\n  margin: 0 auto;\n  text-align: center;\n  bottom: 0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/home/arrange/arrange_resource.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\"}},[_c('div',{staticStyle:{\"width\":\"100%\",\"height\":\"auto\",\"text-align\":\"center\",\"font-family\":\"'Microsoft YaHei UI',serif\",\"font-size\":\"larger\",\"margin-bottom\":\"1%\"}},[_vm._v(\"\\n      设置策略\\n    \")]),_vm._v(\" \"),_c('div',{staticStyle:{\"font-family\":\"'Times New Roman',serif\",\"font-size\":\"x-small\",\"text-align\":\"center\",\"font-weight\":\"lighter\",\"color\":\"red\",\"margin-bottom\":\"1%\"}},[_vm._v(\"\\n      *每次排班最多给志愿者安排一个\\\"待救援\\\"任务，安排之后任务状态变更为“已分配”\\n    \")]),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"100%\",\"height\":\"10%\"}},[_c('el-row',{attrs:{\"gutter\":24}},[_c('el-col',{attrs:{\"span\":22,\"offset\":2}},[_c('el-form',{staticClass:\"demo-form-inline\",attrs:{\"inline\":true,\"model\":_vm.formInline}},[_c('el-form-item',{attrs:{\"label\":\"考虑时间\"}},[_c('el-select',{staticStyle:{\"width\":\"105px\"},attrs:{\"placeholder\":\"选择条件\"},model:{value:(_vm.formInline.time),callback:function ($$v) {_vm.$set(_vm.formInline, \"time\", $$v)},expression:\"formInline.time\"}},[_c('el-option',{attrs:{\"label\":\"是\",\"value\":\"time\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"否\",\"value\":\"\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"考虑资源\"}},[_c('el-select',{staticStyle:{\"width\":\"105px\"},attrs:{\"placeholder\":\"选择条件\"},model:{value:(_vm.formInline.resource),callback:function ($$v) {_vm.$set(_vm.formInline, \"resource\", $$v)},expression:\"formInline.resource\"}},[_c('el-option',{attrs:{\"label\":\"是\",\"value\":\"resource\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"否\",\"value\":\"\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"考虑位置\"}},[_c('el-select',{staticStyle:{\"width\":\"105px\"},attrs:{\"placeholder\":\"选择条件\"},model:{value:(_vm.formInline.position),callback:function ($$v) {_vm.$set(_vm.formInline, \"position\", $$v)},expression:\"formInline.position\"}},[_c('el-option',{attrs:{\"label\":\"5公里内\",\"value\":\"position\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"否\",\"value\":\"\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"一键排班\")])],1),_vm._v(\" \"),_c('el-form-item',[_c('download-excel',{attrs:{\"data\":_vm.tableData,\"fields\":_vm.json_fields,\"head\":\"排班表\",\"type\":\"xls\",\"name\":\"排班信息\"}},[_c('el-button',{attrs:{\"type\":\"success\"}},[_vm._v(\" 导出排班信息\")])],1)],1)],1)],1)],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"100%\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":22,\"offset\":1}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"fit\":\"\",\"size\":\"small\",\"border\":\"\",\"data\":_vm.tableData.filter(function (data) { return !_vm.search || data.volunteerName.toLowerCase().includes(_vm.search.toLowerCase()); })\n.slice((_vm.currentPage-1)*_vm.pageSize,_vm.currentPage*_vm.pageSize)}},[_c('el-table-column',{attrs:{\"label\":\"志愿者\",\"prop\":\"volunteerName\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"志愿者手机号\",\"prop\":\"volunteerPhone\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"值班状态\",\"prop\":\"ondueState\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"求助市民\",\"prop\":\"citizenName\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"市民手机号\",\"prop\":\"citizenPhone\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"安排救援时间\",\"formatter\":_vm.dateFormat,\"prop\":\"time\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"状态\",\"prop\":\"state\",\"sortable\":\"\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":(scope.row.state === '已分配') ? 'success' :((scope.row.state === '救援中')? 'info':'white'),\"disable-transitions\":\"\"}},[_vm._v(_vm._s(scope.row.state)+\"\\n                \")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\"},scopedSlots:_vm._u([{key:\"header\",fn:function(scope){return [_c('el-input',{attrs:{\"size\":\"small\",\"placeholder\":\"搜志愿者\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})]}},{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleDelete(scope.$index, scope.row)}}},[_vm._v(\"撤销排班\\n                \")])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"page_div\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.currentPage,\"page-sizes\":[8, 16, 24, 32, 100],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.tableData.length},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.addTitle,\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"fit\":\"\",\"size\":\"small\",\"border\":\"\",\"data\":_vm.addFormData.slice((_vm.currentPage-1)*_vm.pageSize,_vm.currentPage*_vm.pageSize)}},[_c('el-table-column',{attrs:{\"label\":\"志愿者\",\"prop\":\"volunteerName\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"志愿者手机号\",\"prop\":\"volunteerPhone\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"值班状态\",\"prop\":\"ondueState\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"求助市民\",\"prop\":\"citizenName\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"市民手机号\",\"prop\":\"citizenPhone\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"安排救援时间\",\"formatter\":_vm.dateFormat,\"prop\":\"time\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"状态\",\"prop\":\"state\",\"sortable\":\"\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":(scope.row.state !== '') ?'success':'',\"disable-transitions\":\"\"}},[_vm._v(_vm._s(scope.row.state)+\"\\n            \")])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleChangeState}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-701f8811\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/home/arrange/arrange_resource.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/.pnpm/registry.npmmirror.com+extract-text-webpack-plugin@3.0.2_webpack@3.12.0/node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-701f8811\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/selector?type=styles&index=0!./arrange_resource.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/selector?type=script&index=0!./arrange_resource.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/selector?type=script&index=0!./arrange_resource.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-701f8811\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/selector?type=template&index=0!./arrange_resource.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-701f8811\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/home/arrange/arrange_resource.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}