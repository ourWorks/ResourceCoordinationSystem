{"version":3,"sources":["webpack:///src/components/home/volunteer/volunteer_select.vue","webpack:///./src/components/home/volunteer/volunteer_select.vue?312a","webpack:///./src/components/home/volunteer/volunteer_select.vue"],"names":["volunteer_select","name","data","tableData","deadline","longitude","latitude","peopleNum","dailyResource","medicalResource","state","today","Object","get_time","Date","upDateFlag","pageSize","currentPage","mounted","_this","this","promise_default","a","resolve","reject","volunteer","then","response","i","length","catch","error","updated","console","log","updateForm","methods","resetDateFilter","$refs","filterTable","clearFilter","formatter","row","column","address","filterTag","value","filterHandler","slice","_this2","acceptTask","index","_this3","cid","volunteerId","localStorage","getItem","$message","success","$router","push","path","handleSizeChange","val","handleCurrentChange","volunteer_volunteer_select","render","_vm","_h","$createElement","_c","_self","staticClass","ref","staticStyle","width","attrs","prop","label","sortable","scopedSlots","_u","key","fn","scope","type","disable-transitions","_v","_s","size","on","click","$event","$index","column-key","filters","text","filter-method","text-align","background","current-page","page-sizes","page-size","layout","total","size-change","current-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/16.c49ead87cd740eb6fa6a.js","sourcesContent":["<template>\n  <div class=\"help_div\">\n    <el-table\n      ref=\"filterTable\"\n      :data=\"tableData.slice((currentPage-1)*pageSize,currentPage*pageSize)\"\n      style=\"width: 100%\">\n      <el-table-column\n        prop=\"state\"\n        label=\"状态\"\n        sortable\n        width=\"100\">\n        <template slot-scope=\"scope\">\n          <el-tag\n            :type=\"scope.row.state === '待救援' ? 'danger' : 'info'\"\n            disable-transitions>{{ scope.row.state }}\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" width=\"180\">\n        <template slot-scope=\"scope\">\n          <el-button\n            size=\"mini\"\n            type=\"success\"\n            @click=\"acceptTask(scope.$index, scope.row)\">开始救援\n          </el-button>\n        </template>\n      </el-table-column>\n      <el-table-column\n        prop=\"deadline\"\n        label=\"约定时间\"\n        sortable\n        width=\"160\"\n        column-key=\"date\"\n        :filters=\"[{text:'今天', value: today}]\"\n        :filter-method=\"filterHandler\"\n      >\n      </el-table-column>\n      <el-table-column\n        prop=\"phone\"\n        label=\"联系电话\"\n        width=\"120\">\n      </el-table-column>\n      <el-table-column\n        prop=\"longitude\"\n        label=\"经度约数\"\n        width=\"165\">\n      </el-table-column>\n      <el-table-column\n        prop=\"latitude\"\n        label=\"纬度约数\"\n        width=\"165\">\n      </el-table-column>\n      <el-table-column\n        prop=\"peopleNum\"\n        label=\"求助人数\"\n        width=\"80\" style=\"text-align: center\">\n      </el-table-column>\n      <el-table-column\n        prop=\"dailyResource\"\n        label=\"日用资源\"\n        width=\"180\">\n      </el-table-column>\n      <el-table-column\n        prop=\"medicalResource\"\n        label=\"医疗资源\"\n        width=\"180\">\n      </el-table-column>\n      <el-table-column\n        prop=\"comment\"\n        label=\"备注\"\n        width=\"180\">\n      </el-table-column>\n    </el-table>\n    <div  class=\"page_div\">\n      <el-pagination\n        background\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"currentPage\"\n        :page-sizes=\"[8, 16, 23, 32, 100]\"\n        :page-size=\"pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"tableData.length\"\n      ></el-pagination>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {parseTime} from \"../../../utils/get_time\";\nimport {beginVolunteerTask, getWaitingOrArrangedTask} from \"../../../api/volunteer\";\n\nexport default {\n  name: \"volunteer_select\",\n  data() {\n    return {\n      tableData: [{\n        deadline: 0,\n        longitude: 0,\n        latitude: 0,\n        peopleNum: '',\n        dailyResource: '',\n        medicalResource: '',\n        state: \"\",\n      }],\n      today: parseTime(new Date(), \"{y}-{m}-{d}\"),\n      //用来控制页面的更新，每次只更新一次\n      upDateFlag: true,\n      pageSize: 8, //每页多少条\n      currentPage: 1, // 当前页\n    }\n  },\n  //第一次进入时执行一次\n  mounted() {\n\n    return new Promise((resolve, reject) => {\n      getWaitingOrArrangedTask().then(response => {\n        for (var i = 0; i < response.data.length; i++) {\n          response.data[i].deadline = parseTime(response.data[i].deadline)\n        }\n        this.tableData = response.data\n        // localStorage.setItem(\"helpDetails\",response.data)\n        // this.tableData = localStorage.getItem(\"helpDetails\");\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n  // 后面被push回来时，执行一次,如果使用update()就会失败\n  updated() {\n    console.log(\"更新一次\")\n    //upDateFlag不能写在updated里面\n    // var upDateFlag = 1;\n    if (this.upDateFlag) {\n      console.log(\"进行表格的更新\")\n      this.updateForm()\n    }\n  },\n  methods: {\n    resetDateFilter() {\n      this.$refs.filterTable.clearFilter('date');\n    },\n    clearFilter() {\n      this.$refs.filterTable.clearFilter();\n    },\n    formatter(row, column) {\n      return row.address;\n    },\n    filterTag(value, row) {\n      return row.state === value;\n    },\n    //筛选日期的方法\n    filterHandler(value, row, column) {\n      const property = column['property'];\n      // alert(row[property].slice(0,10))\n      return row[property].slice(0, 10) === value;\n    },\n    updateForm() {\n      getWaitingOrArrangedTask().then(response => {\n        for (var i = 0; i < response.data.length; i++) {\n          response.data[i].deadline = parseTime(response.data[i].deadline)\n        }\n        this.tableData = response.data;\n      })\n      this.upDateFlag = false;\n    },\n    acceptTask(index, row) {\n      console.log(index, row);\n      console.log(\"点击了编辑\");\n      console.log(\"要编辑的任务cid是\" + row.cid);\n      beginVolunteerTask({cid:row.cid,volunteerId: localStorage.getItem(\"volunteerId\")}).then(response=>{\n        if(response.data!=null){\n          this.$message.success(\"成功接受任务\")\n          this.$router.push({path: '/home/volunteer/volunteer_task'})\n        }\n      })\n    },\n    // 每页多少条\n    handleSizeChange(val) {\n      this.pageSize = val;\n    },\n    // 当前页\n    handleCurrentChange(val) {\n      this.currentPage = val;\n    },\n  }\n}\n</script>\n\n<style scoped>\n\n.help_div {\n  height: 100%;\n}\n\n.page_div {\n  width: 100%;\n  position: center;\n  padding: 20px 0 0 0;\n  margin: 0 auto;\n  text-align: center;\n  bottom: 0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/home/volunteer/volunteer_select.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"help_div\"},[_c('el-table',{ref:\"filterTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData.slice((_vm.currentPage-1)*_vm.pageSize,_vm.currentPage*_vm.pageSize)}},[_c('el-table-column',{attrs:{\"prop\":\"state\",\"label\":\"状态\",\"sortable\":\"\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":scope.row.state === '待救援' ? 'danger' : 'info',\"disable-transitions\":\"\"}},[_vm._v(_vm._s(scope.row.state)+\"\\n        \")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"success\"},on:{\"click\":function($event){return _vm.acceptTask(scope.$index, scope.row)}}},[_vm._v(\"开始救援\\n        \")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"deadline\",\"label\":\"约定时间\",\"sortable\":\"\",\"width\":\"160\",\"column-key\":\"date\",\"filters\":[{text:'今天', value: _vm.today}],\"filter-method\":_vm.filterHandler}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"phone\",\"label\":\"联系电话\",\"width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"longitude\",\"label\":\"经度约数\",\"width\":\"165\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"latitude\",\"label\":\"纬度约数\",\"width\":\"165\"}}),_vm._v(\" \"),_c('el-table-column',{staticStyle:{\"text-align\":\"center\"},attrs:{\"prop\":\"peopleNum\",\"label\":\"求助人数\",\"width\":\"80\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"dailyResource\",\"label\":\"日用资源\",\"width\":\"180\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"medicalResource\",\"label\":\"医疗资源\",\"width\":\"180\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"comment\",\"label\":\"备注\",\"width\":\"180\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"page_div\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.currentPage,\"page-sizes\":[8, 16, 23, 32, 100],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.tableData.length},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3441be74\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/home/volunteer/volunteer_select.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/.pnpm/registry.npmmirror.com+extract-text-webpack-plugin@3.0.2_webpack@3.12.0/node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3441be74\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/selector?type=styles&index=0!./volunteer_select.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/selector?type=script&index=0!./volunteer_select.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/selector?type=script&index=0!./volunteer_select.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3441be74\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/selector?type=template&index=0!./volunteer_select.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3441be74\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/home/volunteer/volunteer_select.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}