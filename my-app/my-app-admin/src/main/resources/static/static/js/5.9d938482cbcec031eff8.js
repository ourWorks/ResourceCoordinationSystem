webpackJsonp([5],{"8QOW":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("qI/l"),n={name:"manage_leader",data:function(){return{tableData:[{id:"",name:"",gender:"",age:"",email:"",phone:"",idCard:""}],addLeaderForm:{id:"",orgId:localStorage.getItem("l_orgId")},dialogFormVisible:!1,formLabelWidth:"120px",pageSize:8,currentPage:1}},mounted:function(){var e=this;Object(l.c)({orgId:localStorage.getItem("l_orgId")}).then(function(t){e.tableData=t.data,console.log("%%%%%%%%%%%%"),console.log(e.tableData)})},methods:{deleteRow:function(e,t){var a=this;console.log(e,t),console.log(t[e].id),Object(l.f)({id:t[e].id,orgId:localStorage.getItem("l_orgId")}).then(function(e){a.$message.success("成功删除该领导")}),t.splice(e,1)},deleteSelectd:function(){for(var e=0;e<this.multipleSelection.length;e++)console.log(this.multipleSelection[e].name),Object(l.f)({id:this.multipleSelection[e].id,orgId:localStorage.getItem("l_orgId")}).then(function(e){})},deleteSelectItem:function(){var e=this;this.$confirm("此操作将删除勾选的领导,是否继续?（特别注意，全选按钮是选择所有页面的数据）","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteSelectd(),e.multipleSelection.forEach(function(t,a){e.tableData.forEach(function(a,l){t.id==a.id&&e.tableData.splice(l,1)})}),e.$message({type:"success",message:"删除成功!"}),console.log("删除成功")}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.filterTable.toggleRowSelection(e)}):this.$refs.filterTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},addLeader:function(){var e=this;""==this.addLeaderForm.id?this.$message.warning("市民号不能为空"):this.addLeaderForm.id.replace(/[^\d]/g,"").length!=this.addLeaderForm.id.length?this.$message.warning("市民号只能为纯数字"):Object(l.a)(this.addLeaderForm).then(function(t){null!=t.data&&(e.$message.success("成功添加新领导！"),e.tableData.push(t.data),e.dialogFormVisible=!1)})},handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"margin-top":"20px","text-align":"center"}},[a("el-button",{on:{click:function(t){return e.toggleSelection()}}},[e._v("取消选择")]),e._v(" "),a("el-button",{on:{click:function(t){return e.deleteSelectItem()}}},[e._v("批量删除")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加新领导")])],1),e._v(" "),a("el-table",{ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize)},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",sortable:"",label:"姓名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gender",sortable:"",label:"性别",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"age",sortable:"",label:"年龄",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"190"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号",width:"190"}}),e._v(" "),a("el-table-column",{attrs:{prop:"idCard",label:"身份证号码",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.deleteRow(t.$index,e.tableData)}}},[e._v("\n            删除\n          ")])]}}])})],1),e._v(" "),a("div",{staticClass:"page_div"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[8,16,24,32,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加组织的领导",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:e.addLeaderForm,attrs:{model:e.addLeaderForm}},[a("el-form-item",{attrs:{label:"输入市民号","label-width":e.formLabelWidth,rules:[{required:!0,message:"市民id不能为空"},{type:"number",message:"市民id必须为数字值"}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.addLeaderForm.id,callback:function(t){e.$set(e.addLeaderForm,"id",t)},expression:"addLeaderForm.id"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.addLeader.apply(null,arguments)}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var o=a("e/h9")(n,i,!1,function(e){a("U5aX")},"data-v-ded5502a",null);t.default=o.exports},U5aX:function(e,t){}});
//# sourceMappingURL=5.9d938482cbcec031eff8.js.map