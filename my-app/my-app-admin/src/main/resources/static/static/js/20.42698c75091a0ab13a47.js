webpackJsonp([20],{iTgd:function(e,t){},okp2:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("qI/l"),n=(l("mIjv"),{name:"manage_volunteer",data:function(){return{tableData:[{orgId:"",id:"",volunteerId:"",name:"",age:"",gender:"",phone:"",email:"",longitude:"",latitude:"",ondueState:"",startTime:"",endTime:""}],addVolunteerForm:{id:"",orgId:localStorage.getItem("l_orgId")},dialogFormVisible:!1,formLabelWidth:"120px",pageSize:8,currentPage:1}},mounted:function(){var e=this;Object(a.d)({orgId:localStorage.getItem("l_orgId")}).then(function(t){e.tableData=t.data,console.log("mounted方法"),console.log(e.tableData)})},methods:{deleteRow:function(e,t){var l=this;console.log(e,t),console.log(t[e].id),Object(a.g)({id:t[e].id,orgId:localStorage.getItem("l_orgId")}).then(function(a){null!=a.data&&(t.splice(e,1),l.$message.success("成功删除该志愿者"))})},deleteSelectd:function(){for(var e=0;e<this.multipleSelection.length;e++)console.log(this.multipleSelection[e].name),Object(a.g)({id:this.multipleSelection[e].id,orgId:localStorage.getItem("l_orgId")}).then(function(e){})},deleteSelectItem:function(){var e=this;this.$confirm("此操作将删除勾选的志愿者,是否继续?（特别注意，全选按钮是选择所有页面的数据）","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteSelectd(),e.multipleSelection.forEach(function(t,l){e.tableData.forEach(function(l,a){t.id==l.id&&e.tableData.splice(a,1)})}),e.$message({type:"success",message:"删除成功!"}),console.log("删除成功")}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.filterTable.toggleRowSelection(e)}):this.$refs.filterTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e},dateFormat:function(e,t,l,a){return l.split("T")[1]}}}),o={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{staticStyle:{"margin-top":"20px","text-align":"center"}},[l("el-button",{on:{click:function(t){return e.toggleSelection()}}},[e._v("取消选择")]),e._v(" "),l("el-button",{on:{click:function(t){return e.deleteSelectItem()}}},[e._v("批量删除")])],1),e._v(" "),l("el-table",{ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize)},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),l("el-table-column",{attrs:{prop:"ondueState",label:"值班状态",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-tag",{attrs:{type:"空闲"===t.row.ondueState?"success":"info","disable-transitions":""}},[e._v(e._s(t.row.ondueState)+"\n        ")])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"name",sortable:"",label:"姓名",width:"80"}}),e._v(" "),l("el-table-column",{attrs:{prop:"gender",sortable:"",label:"性别",width:"80"}}),e._v(" "),l("el-table-column",{attrs:{prop:"age",sortable:"",label:"年龄",width:"80"}}),e._v(" "),l("el-table-column",{attrs:{prop:"phone",label:"手机号",width:"120"}}),e._v(" "),l("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"160"}}),e._v(" "),l("el-table-column",{attrs:{prop:"longitude",label:"经度",width:"170"}}),e._v(" "),l("el-table-column",{attrs:{prop:"latitude",label:"纬度",width:"170"}}),e._v(" "),l("el-table-column",{attrs:{prop:"startTime",formatter:e.dateFormat,label:"空闲时段开始",width:"120"}}),e._v(" "),l("el-table-column",{attrs:{prop:"endTime",formatter:e.dateFormat,label:"空闲时段结束",width:"120"}}),e._v(" "),l("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"danger",size:"small"},nativeOn:{click:function(l){return l.preventDefault(),e.deleteRow(t.$index,e.tableData)}}},[e._v("\n          删除\n        ")])]}}])})],1),e._v(" "),l("div",{staticClass:"page_div"},[l("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[8,16,24,32,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),l("el-dialog",{attrs:{title:"添加组织的领导",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[l("el-form",{ref:e.addVolunteerForm,attrs:{model:e.addVolunteerForm}},[l("el-form-item",{attrs:{label:"输入市民号","label-width":e.formLabelWidth,rules:[{required:!0,message:"市民id不能为空"},{type:"number",message:"市民id必须为数字值"}]}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.addVolunteerForm.id,callback:function(t){e.$set(e.addVolunteerForm,"id",t)},expression:"addVolunteerForm.id"}})],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.addVolunteer.apply(null,arguments)}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var i=l("e/h9")(n,o,!1,function(e){l("iTgd")},"data-v-0ad9b48c",null);t.default=i.exports}});
//# sourceMappingURL=20.42698c75091a0ab13a47.js.map