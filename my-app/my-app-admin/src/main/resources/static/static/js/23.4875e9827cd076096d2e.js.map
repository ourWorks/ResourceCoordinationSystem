{"version":3,"sources":["webpack:///src/components/home/arrange/resource_display.vue","webpack:///./src/components/home/arrange/resource_display.vue?d46c","webpack:///./src/components/home/arrange/resource_display.vue"],"names":["resource_display","name","data","totalDemand","orgResource","maxNum","minNum","betweenSpace","mounted","this","updatePicture","methods","_this","Object","arrange","then","response","console","log","i","length","orgId","localStorage","getItem","generatePic","option","myChart","$echarts","init","document","getElementById","tooltip","trigger","axisPointer","type","crossStyle","color","toolbox","feature","dataView","show","readOnly","magicType","restore","saveAsImage","legend","xAxis","yAxis","min","max","interval","axisLabel","formatter","series","valueFormatter","value","setOption","arrange_resource_display","render","_h","$createElement","_c","_self","staticStyle","width","height","attrs","id","style","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"sHAaAA,GACAC,KAAA,mBACAC,KAFA,WAGA,OACAC,aAAA,oDACAC,aAAA,sDACAC,OAAA,IACAC,OAAA,EACAC,aAAA,KAIAC,QAZA,WAcAC,KAAAC,iBAEAC,SACAD,cADA,WACA,IAAAE,EAAAH,KAEMI,OAAAC,EAAA,EAAAD,GAANE,KAAA,SAAAC,GACAC,QAAAC,IAAA,aACAD,QAAAC,IAAA,eACAD,QAAAC,IAAAF,EAAAd,MAEAU,EAAAT,YAAAa,EAAAd,KACA,QAAAiB,EAAA,EAAAA,EAAAH,EAAAd,KAAAkB,OAAAD,IACAP,EAAAP,OAAAO,EAAAP,OAAAW,EAAAd,KAAAiB,GAAAP,EAAAP,OAAAW,EAAAd,KAAAiB,GAIQN,OAAAC,EAAA,EAAAD,EAARQ,MAAAC,aAAAC,QAAA,aAAAR,KAAA,SAAAC,GAEAJ,EAAAR,YAAAY,EAAAd,KACA,QAAAiB,EAAA,EAAAA,EAAAH,EAAAd,KAAAkB,OAAAD,IACAP,EAAAP,OAAAO,EAAAP,OAAAW,EAAAd,KAAAiB,GAAAP,EAAAP,OAAAW,EAAAd,KAAAiB,GAEAP,EAAAP,OAAA,IACAO,EAAAP,OAAA,IACAO,EAAAP,OAAA,IACAO,EAAAP,OAAA,IACAO,EAAAP,OAAA,IACAO,EAAAP,OAAA,IACAO,EAAAP,OAAA,KACAO,EAAAP,OAAA,KACAO,EAAAP,OAAA,MACAO,EAAAP,OAAA,KAEAO,EAAAL,aAAAK,EAAAP,OAAA,EACAY,QAAAC,IAAA,aACAN,EAAAY,mBAIAA,YArCA,WAuCA,IACAC,EADAC,EAAAjB,KAAAkB,SAAAC,KAAAC,SAAAC,eAAA,UAEAL,GACAM,SACAC,QAAA,OACAC,aACAC,KAAA,QACAC,YACAC,MAAA,UAIAC,SACAC,SACAC,UAAAC,MAAA,EAAAC,UAAA,GACAC,WAAAF,MAAA,EAAAN,MAAA,eACAS,SAAAH,MAAA,GACAI,aAAAJ,MAAA,KAGAK,QAEA3C,MAAA,qBAEA4C,QAEAZ,KAAA,WACAhC,MAAA,yDACA+B,aACAC,KAAA,YAIAa,QAEAb,KAAA,QACAjC,KAAA,KACA+C,IAAAvC,KAAAH,OACA2C,IAAAxC,KAAAJ,OACA6C,SAAAzC,KAAAF,aACA4C,WACAC,UAAA,gBAIAC,SAEApD,KAAA,UACAiC,KAAA,MACAH,SACAuB,eAAA,SAAAC,GACA,OAAAA,EAAA,QAGArD,KAAAO,KAAAN,cAGAF,KAAA,SACAiC,KAAA,MACAH,SACAuB,eAAA,SAAAC,GACA,OAAAA,EAAA,QAGArD,KAAAO,KAAAL,iBAKAsB,EAAA8B,UAAA/B,MCtIegC,GADEC,OAFjB,WAA0B,IAAaC,EAAblD,KAAamD,eAA0BC,EAAvCpD,KAAuCqD,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,aAAaC,MAAA,OAAAC,OAAA,QAA+BC,OAAQC,GAAA,YAAeN,EAAA,OAAYO,OAAQJ,MAAA,OAAAC,OAAA,QAA2BC,OAASC,GAAA,aAEpNE,oBCYjBC,EAdyBC,EAAQ,OAcjCC,CACExE,EACAyD,GATF,EAEA,KAEA,KAEA,MAUegB,EAAA,QAAAH,EAAiB","file":"static/js/23.4875e9827cd076096d2e.js","sourcesContent":["<template>\n  <!-- ECharts图表测试 -->\n  <div id=\"charts\" style=\"width:100%;height:100%\">\n    <div id=\"main\" :style=\"{width:'100%',height:'100%'}\"></div>\n  </div>\n</template>\n\n<script>\nimport {\n  getOrgResourceNum,\n  getTotalDemandNum\n} from \"../../../api/arrange\";\n\nexport default {\n  name: \"resource_display\",\n  data() {\n    return {\n      totalDemand: [2.0, 4.9, 7.0, 23.2, 25.6, 76.7, 135.6, 162.2, 32.6, 20.0, 6.4, 3.3],\n      orgResource: [2.6, 5.9, 9.0, 26.4, 28.7, 70.7, 175.6, 182.2, 48.7, 18.8, 6.0, 2.3],\n      maxNum: 250,\n      minNum: 0,\n      betweenSpace: 50,\n      //用来控制页面的更新，每次只更新一次\n    }\n  },\n  mounted() {\n    //貌似下面的加载eCharts的方法代码直接写在这里是不行的,因为生命周期未必在这里装载完dom对象\n    this.updatePicture()\n  },\n  methods: {\n    updatePicture() {\n      // alert(\"Hi\")\n      getTotalDemandNum().then(response => {\n        console.log(\"methodA方法\")\n        console.log(\"&&&&&&&&&&&\")\n        console.log(response.data)\n        // this.totalDemand=[1,2, 3, 6, 0, 0, 1, 1, 0, 1, 3, 2]\n        this.totalDemand = response.data\n        for (var i = 0; i < response.data.length; i++) {\n          this.maxNum = this.maxNum > response.data[i] ? this.maxNum : response.data[i];\n        }\n\n        ///////////////////////////////getOrgResourceNum要嵌套进这里面,否则可能就是异步请求，会出现数据不加载的错误/////////////////////\n        getOrgResourceNum({orgId: localStorage.getItem(\"l_orgId\")}).then(response => {\n          //this.test放在外面是不行的，放在外面就会加载得比里面更快\n          this.orgResource = response.data\n          for (var i = 0; i < response.data.length; i++) {\n            this.maxNum = this.maxNum > response.data[i] ? this.maxNum : response.data[i];\n          }\n          if (this.maxNum < 100) {\n            this.maxNum = 100;\n          } else if (this.maxNum < 500) {\n            this.maxNum = 500;\n          } else if (this.maxNum < 1000) {\n            this.maxNum = 1000;\n          } else if (this.maxNum < 1500) {\n            this.maxNum = 1500;\n          } else if (this.maxNum < 2000) {\n            this.maxNum = 2000;\n          }\n          this.betweenSpace = this.maxNum / 5;\n          console.log(\"methodB方法\")\n          this.generatePic()\n        })\n      })\n    },\n    generatePic() {\n      //加载图\n      let myChart = this.$echarts.init(document.getElementById('main'))\n      let option;\n      option = {\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            type: 'cross',\n            crossStyle: {\n              color: '#999'\n            }\n          }\n        },\n        toolbox: {\n          feature: {\n            dataView: {show: true, readOnly: false},\n            magicType: {show: true, type: ['line', 'bar']},\n            restore: {show: true},\n            saveAsImage: {show: true}\n          }\n        },\n        legend: {\n          // data: ['求助物资总需求', '本组织总供应', 'Temperature']\n          data: ['“待救援”需求', '本组织总供应']\n        },\n        xAxis: [\n          {\n            type: 'category',\n            data: [\"口罩\", \"绷带\", \"担架\", \"降压药\", \"抗过敏药\", \"饮用水\", \"充饥食品\", \"帐篷\", \"车位\", \"船位\"],\n            axisPointer: {\n              type: 'shadow'\n            }\n          }\n        ],\n        yAxis: [\n          {\n            type: 'value',\n            name: '份数',\n            min: this.minNum,\n            max: this.maxNum,\n            interval: this.betweenSpace,\n            axisLabel: {\n              formatter: '{value} /人'\n            }\n          }\n        ],\n        series: [\n          {\n            name: '“待救援”需求',\n            type: 'bar',\n            tooltip: {\n              valueFormatter: function (value) {\n                return value + ' ml';\n              }\n            },\n            data: this.totalDemand\n          },\n          {\n            name: '本组织总供应',\n            type: 'bar',\n            tooltip: {\n              valueFormatter: function (value) {\n                return value + ' ml';\n              }\n            },\n            data: this.orgResource\n          }\n        ]\n      };\n\n      option && myChart.setOption(option);\n    }\n  }\n\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/home/arrange/resource_display.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"id\":\"charts\"}},[_c('div',{style:({width:'100%',height:'100%'}),attrs:{\"id\":\"main\"}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-45809c40\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/home/arrange/resource_display.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/selector?type=script&index=0!./resource_display.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/selector?type=script&index=0!./resource_display.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-45809c40\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@13.7.3_a47fcb3a8782e14c2edfd0d079e36142/node_modules/vue-loader/lib/selector?type=template&index=0!./resource_display.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/home/arrange/resource_display.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}